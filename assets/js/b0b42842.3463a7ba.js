"use strict";(self.webpackChunkhyperfy_docs=self.webpackChunkhyperfy_docs||[]).push([[3799],{7853:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var o=n(4848),s=n(8453);const r={sidebar_position:50},a="Sync State",i={id:"developers/sync-state",title:"Sync State",description:"While you are free to use React's useState hooks in order to change things only for the current avatar, it's likely you'll want to have some or all of your state synchronized with all clients connected to the world so that everyone sees the same thing.",source:"@site/docs/developers/sync-state.md",sourceDirName:"developers",slug:"/developers/sync-state",permalink:"/hyperfy-docs/docs/developers/sync-state",draft:!1,unlisted:!1,editUrl:"https://github.com/madjin/hyperfy-docs/tree/main/docs/developers/sync-state.md",tags:[],version:"current",lastUpdatedBy:"Knar",lastUpdatedAt:1710878381e3,sidebarPosition:50,frontMatter:{sidebar_position:50},sidebar:"developers",previous:{title:"React",permalink:"/hyperfy-docs/docs/developers/react"},next:{title:"Guide: Destructibles",permalink:"/hyperfy-docs/docs/developers/destructibles"}},c={},l=[];function h(e){const t={code:"code",h1:"h1",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"sync-state",children:"Sync State"}),"\n",(0,o.jsxs)(t.p,{children:["While you are free to use React's ",(0,o.jsx)(t.code,{children:"useState"})," hooks in order to change things only for the current avatar, it's likely you'll want to have some or all of your state synchronized with all clients connected to the world so that everyone sees the same thing."]}),"\n",(0,o.jsxs)(t.p,{children:["To do this, export a ",(0,o.jsx)(t.code,{children:"getStore"})," function and then use the ",(0,o.jsx)(t.code,{children:"useSyncState"})," hook to read and write to the distributed store."]}),"\n",(0,o.jsxs)(t.p,{children:["The following example shows a cube that changes color when anyone clicks on it. The color change is observed by ",(0,o.jsx)(t.strong,{children:"everyone"})," in the world:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:'import React from "react";\n// highlight-next-line\nimport { useSyncState } from "hyperfy";\n\nexport default function ColorCube() {\n// highlight-next-line\n  const [color, dispatch] = useSyncState((state) => state.color);\n  return (\n    <app>\n// highlight-next-line\n      <box color={color} onPointerDown={() => dispatch("toggle")} />\n    </app>\n  );\n}\n\nconst initialState = {\n  color: "blue",\n};\n\n// highlight-start\nexport function getStore(state = initialState) {\n  return {\n    state,\n    actions: {\n      toggle(state) {\n        state.color = state.color === "blue" ? "red" : "blue";\n      },\n    },\n  };\n}\n// highlight-end\n'})}),"\n",(0,o.jsx)(t.p,{children:"Synchronized state is inspired by the flux/redux pattern popular on the web, but instead of dispatching events locally they are distributed across all clients and the server."}),"\n",(0,o.jsx)(t.p,{children:"While it may take a second to get used to we've found that this flow is far more efficient and superior to what most platforms do by syncing the component changes of every entity in the space each time they change. This is the ultimate flex for declarative programming that other 3D engines don't have access to."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var o=n(6540);const s={},r=o.createContext(s);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);